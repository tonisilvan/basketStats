<!doctype html>
<html lang="es">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Overlay OBS (Express)</title>
<style>
  :root{
    --fg:#ffffff;
    --bg:transparent;
    --size:64px;
    --align:left;
    --shadow:0 2px 10px rgba(0,0,0,.45);
    --font: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans";
  }
  body{margin:0;background:var(--bg);color:var(--fg);font-family:var(--font)}
  .wrap{padding:8px 12px; text-align:var(--align)}
  .title{font-size:18px;margin-bottom:6px;opacity:.85;text-shadow:var(--shadow)}
  .score{font-size:var(--size);font-weight:900;text-shadow:var(--shadow);letter-spacing:2px}
</style>
<div class="wrap">
  <div id="title" class="title">—</div>
  <div id="score" class="score">-- : --</div>
</div>
<script>
  // Params: ?fg=%23fff&bg=transparent&size=80&align=center
  const q = new URLSearchParams(location.search);
  const set = (varName, def) => document.documentElement.style.setProperty(varName, q.get(varName.slice(2)) || def);
  set('--fg', '#fff'); set('--bg', 'transparent'); set('--size', (q.get('size')||'64')+'px'); set('--align', q.get('align')||'left');

  async function tick(){
    try{
      const r = await fetch('/live.json', {cache:'no-store'});
      if(r.ok){
        const data = await r.json();
        const a = (data.teams?.[0]?.players||[]).reduce((s,p)=> s + (p.PTS||0), 0);
        const b = (data.teams?.[1]?.players||[]).reduce((s,p)=> s + (p.PTS||0), 0);
        document.getElementById('title').textContent = data.title || '—';
        document.getElementById('score').textContent = `${a} : ${b}`;
      }
    }catch(e){ /* ignore */ }
    setTimeout(tick, 300);
  }
  tick();
</script>
</html>
